<!doctype html>
<html>
<head>
	<script src="js/phaser.min.js"></script>
	<script src="js/player.js"></script>
    <script src="js/egg.js"></script>
	
	<script>
		
		var game = new Phaser.Game(960,600, Phaser.AUTO, 'phaser-example',
				{ preload: preload, create: create, update: update });
				
		function preload () {
			game.load.image('logo','img/ntgames.png');
			game.load.image('backgroundImage','img/background.png');
			game.load.spritesheet('wolf','img/player.png', 335, 325, 4);
            game.load.image('egg','img/egg.png');
            game.load.image('splash','img/splash.png');
		}
		
		var background;
		var logo;
		var gameRunning;
		var player = new Player();
        var maximumNumberOfEggs = 2;    // maximum number of active eggs
        var eggs = [];                  // array holding all the eggs
		
		function create() {
			game.physics.startSystem(Phaser.Physics.ARCADE);
			background = game.add.sprite(0, 0, 'backgroundImage');
			player.create();
			logo = game.add.sprite(0, 0, 'logo');
			game.input.onDown.add(removeLogo, this);
		}
		
		function removeLogo() {
			logo.kill();
			gameRunning = true;
		}
		
		function update() {
			if (gameRunning) {
                player.update();
                /*
                if we can add eggs (not reached maximum)
                then add new eggs
                 */
                if (eggs.length < maximumNumberOfEggs) {
                    eggs.push(new Egg(game, player));
                }
                /*
                for all the active eggs, update them
                the other ones, remove them
                */
                for (var i = 0; i < eggs.length; i++) {
                    if (eggs[i].active) {
                        eggs[i].update();
                    }
                    else {
                        eggs.splice(i, 1);
                    }
                }
            }
		}
		
	</script>
</head>
<body bgcolor='black'>
<p id="nameRequest"></p>
</body>
</html>
